{% extends "basic.html" %} {% block title %}Shop All Products - ShopEase{% endblock title %}
{% block body %} {% load static %}

<div style="background: linear-gradient(135deg, #f8f9fe 0%, #eef2ff 100%); padding: 40px 0;">
	<div class="container">
		<div class="row align-items-center">
			<div class="col-md-6">
				<h1 style="font-size: 2.5rem; font-weight: 700; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; margin-bottom: 10px;">
					Shop All Products
				</h1>
				<p style="color: #64748b; font-size: 1.1rem;">{{ total_products }} products available</p>
			</div>
			<div class="col-md-6">
				<form method="GET" action="/shop/" class="d-flex align-items-center" style="gap: 10px;">
					<input type="text" name="search" value="{{ search_query }}" 
						class="form-control" placeholder="Search products..." 
						style="border-radius: 12px; border: 2px solid #e2e8f0; padding: 12px 20px;">
					<button type="submit" class="btn" 
						style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border: none; padding: 12px 30px; border-radius: 12px; font-weight: 600; white-space: nowrap;">
						Search
					</button>
				</form>
			</div>
		</div>
	</div>
</div>

<div style="background: #f8f9fe; padding: 60px 0;">
	<div class="container">
		<div class="row">
			<!-- Sidebar Filters -->
			<div class="col-lg-3 mb-5 mb-lg-0">
				<div class="card border-0 shadow-sm" style="border-radius: 20px; overflow: hidden; position: sticky; top: 20px;">
					<div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); padding: 25px;">
						<h3 style="color: white; font-size: 1.3rem; font-weight: 700; margin: 0;">
							<i class="fas fa-filter mr-2"></i>Filters
						</h3>
					</div>
					<div style="padding: 30px;">
						<form method="GET" action="/shop/" id="filterForm">
							<!-- Preserve search query -->
							{% if search_query %}
							<input type="hidden" name="search" value="{{ search_query }}">
							{% endif %}
							
							<!-- Price Range Filter -->
							<div class="mb-4">
								<h5 style="font-size: 1rem; font-weight: 700; color: #1a202c; margin-bottom: 15px;">
									Price Range
								</h5>
								<div class="row">
									<div class="col-6">
										<input type="number" name="min_price" value="{{ current_min }}" 
											placeholder="Min ₹" class="form-control" 
											style="border-radius: 10px; border: 2px solid #e2e8f0; padding: 10px;">
									</div>
									<div class="col-6">
										<input type="number" name="max_price" value="{{ current_max }}" 
											placeholder="Max ₹" class="form-control" 
											style="border-radius: 10px; border: 2px solid #e2e8f0; padding: 10px;">
									</div>
								</div>
							</div>

							<!-- Category Filter -->
							<div class="mb-4">
								<h5 style="font-size: 1rem; font-weight: 700; color: #1a202c; margin-bottom: 15px;">
									Categories
								</h5>
								<div class="form-check mb-2" style="padding-left: 0;">
									<label style="display: flex; align-items: center; padding: 12px; background: {% if current_category == 'Web Applications' %}#eef2ff{% else %}white{% endif %}; border-radius: 10px; cursor: pointer; transition: all 0.3s;">
										<input type="radio" name="category" value="Web Applications" 
											{% if current_category = 'Web Applications' %}checked{% endif %}
											style="margin-right: 10px; cursor: pointer;" onchange="this.form.submit()">
										<span style="flex: 1; color: #1a202c; font-weight: 500;">Web Apps</span>
										<span style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 4px 12px; border-radius: 8px; font-size: 0.85rem; font-weight: 600;">{{ web }}</span>
									</label>
								</div>
								<div class="form-check mb-2" style="padding-left: 0;">
									<label style="display: flex; align-items: center; padding: 12px; background: {% if current_category == 'Graphical Applications' %}#eef2ff{% else %}white{% endif %}; border-radius: 10px; cursor: pointer; transition: all 0.3s;">
										<input type="radio" name="category" value="Graphical Applications" 
											{% if current_category = 'Graphical Applications' %}checked{% endif %}
											style="margin-right: 10px; cursor: pointer;" onchange="this.form.submit()">
										<span style="flex: 1; color: #1a202c; font-weight: 500;">Desktop Apps</span>
										<span style="background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%); color: white; padding: 4px 12px; border-radius: 8px; font-size: 0.85rem; font-weight: 600;">{{ desktop }}</span>
									</label>
								</div>
								<div class="form-check mb-2" style="padding-left: 0;">
									<label style="display: flex; align-items: center; padding: 12px; background: {% if current_category == 'Console Applications' %}#eef2ff{% else %}white{% endif %}; border-radius: 10px; cursor: pointer; transition: all 0.3s;">
										<input type="radio" name="category" value="Console Applications" 
											{% if current_category = 'Console Applications' %}checked{% endif %}
											style="margin-right: 10px; cursor: pointer;" onchange="this.form.submit()">
										<span style="flex: 1; color: #1a202c; font-weight: 500;">Console Apps</span>
										<span style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); color: white; padding: 4px 12px; border-radius: 8px; font-size: 0.85rem; font-weight: 600;">{{ console }}</span>
									</label>
								</div>
								{% if current_category %}
								<div class="mt-2">
									<a href="/shop/" class="btn btn-sm btn-outline-secondary w-100" style="border-radius: 10px;">
										Clear Category
									</a>
								</div>
								{% endif %}
							</div>

							<!-- Sort By -->
							<div class="mb-4">
								<h5 style="font-size: 1rem; font-weight: 700; color: #1a202c; margin-bottom: 15px;">
									Sort By
								</h5>
								<select name="sort" class="form-control" onchange="this.form.submit()"
									style="border-radius: 10px; border: 2px solid #e2e8f0; padding: 12px; font-weight: 500;">
									<option value="newest" {% if current_sort = 'newest' or not current_sort %}selected{% endif %}>Newest First</option>
									<option value="price_low" {% if current_sort = 'price_low' %}selected{% endif %}>Price: Low to High</option>
									<option value="price_high" {% if current_sort = 'price_high' %}selected{% endif %}>Price: High to Low</option>
									<option value="name_asc" {% if current_sort = 'name_asc' %}selected{% endif %}>Name: A to Z</option>
									<option value="name_desc" {% if current_sort = 'name_desc' %}selected{% endif %}>Name: Z to A</option>
								</select>
							</div>

							<!-- Apply Filters Button -->
							<button type="submit" class="btn btn-block" 
								style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border: none; padding: 14px; border-radius: 12px; font-weight: 600; font-size: 1rem;">
								Apply Filters
							</button>
							
							<!-- Clear All Filters -->
							{% if current_min or current_max or current_category or current_sort or search_query %}
							<a href="/shop/" class="btn btn-outline-secondary btn-block mt-2" 
								style="border-radius: 12px; padding: 14px; font-weight: 600;">
								Clear All Filters
							</a>
							{% endif %}
						</form>
					</div>
				</div>
			</div>

			<!-- Products Grid -->
			<div class="col-lg-9">
					<div class="row mb-5">
						{% for catprods in allprods %}
						<div class="col-lg-4 col-md-6 mb-4">
							<div class="card border-0 shadow-sm"
								style="border-radius: 20px; overflow: hidden; height: 100%; transition: all 0.3s ease; background: white;">
								<a href="/view/{{catprods.Product_Name}}/{{catprods.id}}"
									style="text-decoration: none;">
									<div
										style="position: relative; height: 280px; background: linear-gradient(135deg, #f8f9fe 0%, #e9ecef 100%); overflow: hidden;">
										{% if catprods.image %}
										<img src="/media/{{catprods.image}}" alt="{{catprods.Product_Name}}"
											style="width: 100%; height: 100%; object-fit: cover; transition: transform 0.4s ease;" />
										{% else %}
										<div
											style="width: 100%; height: 100%; display: flex; align-items: center; justify-content: center;">
											<svg width="80" height="80" viewBox="0 0 24 24" fill="none" stroke="#667eea"
												stroke-width="2">
												<rect x="2" y="3" width="20" height="14" rx="2" ry="2"></rect>
												<line x1="8" y1="21" x2="16" y2="21"></line>
												<line x1="12" y1="17" x2="12" y2="21"></line>
											</svg>
										</div>
										{% endif %}
									</div>
									<div style="padding: 30px;">
										<div
											style="display: inline-block; background: #eef2ff; color: #667eea; padding: 6px 14px; border-radius: 12px; font-size: 0.8rem; font-weight: 600; text-transform: uppercase; margin-bottom: 15px;">
											{{catprods.Cateogary}}
										</div>
										<h3 style="font-size: 1.35rem; font-weight: 700; color: #1a202c; margin-bottom: 12px; line-height: 1.4;"
											id="namep{{catprods.id}}">
											{{catprods.Product_Name}}
										</h3>
										<p
											style="color: #718096; font-size: 0.95rem; margin-bottom: 20px; line-height: 1.6;">
											{{catprods.Description|truncatewords:15}}
										</p>
										<div
											style="display: flex; align-items: center; justify-content: space-between; padding-top: 20px; border-top: 1px solid #e2e8f0;">
											<div>
												<span style="font-size: 1.75rem; font-weight: 700; color: #1a202c;"
													id="pricep{{catprods.id}}">₹{{catprods.Price}}</span>
												<del style="font-size: 1rem; color: #a0aec0; margin-left: 8px;">₹{%
													widthratio catprods.Price 1 2 %}</del>
											</div>
											<button class="addtoCart btn btn-sm" id="p{{catprods.id}}"
												style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border: none; padding: 10px 20px; border-radius: 10px; font-weight: 600; transition: all 0.3s ease;">
												Add to Cart
											</button>
										</div>
									</div>
								</a>
							</div>
						</div>
						{% endfor %}
					</div>
				</div>

			<!-- Products Grid -->
			<div class="col-lg-9">
				{% if allprods %}
				<div class="row">
					{% for catprods in allprods %}
					<div class="col-lg-4 col-md-6 mb-4">
						<div class="card border-0 shadow-sm product-card"
							style="border-radius: 20px; overflow: hidden; height: 100%; transition: all 0.3s ease; background: white;">
							<a href="/view/{{catprods.Product_Name}}/{{catprods.id}}"
								style="text-decoration: none;">
								<div
									style="position: relative; height: 280px; background: linear-gradient(135deg, #f8f9fe 0%, #e9ecef 100%); overflow: hidden;">
									{% if catprods.image %}
									<img src="/media/{{catprods.image}}" alt="{{catprods.Product_Name}}"
										class="product-image"
										style="width: 100%; height: 100%; object-fit: cover; transition: transform 0.4s ease;" />
									{% else %}
									<div
										style="width: 100%; height: 100%; display: flex; align-items: center; justify-content: center;">
										<svg width="80" height="80" viewBox="0 0 24 24" fill="none" stroke="#667eea"
											stroke-width="2">
											<rect x="2" y="3" width="20" height="14" rx="2" ry="2"></rect>
											<line x1="8" y1="21" x2="16" y2="21"></line>
											<line x1="12" y1="17" x2="12" y2="21"></line>
										</svg>
									</div>
									{% endif %}
								</div>
								<div style="padding: 30px;">
									<div
										style="display: inline-block; background: #eef2ff; color: #667eea; padding: 6px 14px; border-radius: 12px; font-size: 0.8rem; font-weight: 600; text-transform: uppercase; margin-bottom: 15px;">
										{{catprods.Cateogary}}
									</div>
									<h3 style="font-size: 1.35rem; font-weight: 700; color: #1a202c; margin-bottom: 12px; line-height: 1.4;"
										id="namep{{catprods.id}}">
										{{catprods.Product_Name}}
									</h3>
									<p
										style="color: #718096; font-size: 0.95rem; margin-bottom: 20px; line-height: 1.6;">
										{{catprods.Description|truncatewords:15}}
									</p>
									<div
										style="display: flex; align-items: center; justify-content: space-between; padding-top: 20px; border-top: 1px solid #e2e8f0;">
										<div>
											<span style="font-size: 1.75rem; font-weight: 700; color: #1a202c;"
												id="pricep{{catprods.id}}">₹{{catprods.Price}}</span>
											<del style="font-size: 1rem; color: #a0aec0; margin-left: 8px;">₹{%
												widthratio catprods.Price 1 2 %}</del>
										</div>
										<button class="addtoCart btn btn-sm" id="p{{catprods.id}}"
											style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border: none; padding: 10px 20px; border-radius: 10px; font-weight: 600; transition: all 0.3s ease;">
											Add to Cart
										</button>
									</div>
								</div>
							</a>
						</div>
					</div>
					{% endfor %}
				</div>
				{% else %}
				<!-- No Products Found -->
				<div class="text-center py-5">
					<div style="background: white; border-radius: 20px; padding: 60px 40px; box-shadow: 0 10px 30px rgba(0,0,0,0.08);">
						<svg width="120" height="120" viewBox="0 0 24 24" fill="none" stroke="#cbd5e0" stroke-width="2" class="mx-auto mb-4">
							<circle cx="11" cy="11" r="8"></circle>
							<path d="m21 21-4.35-4.35"></path>
						</svg>
						<h3 style="font-size: 1.8rem; font-weight: 700; color: #1a202c; margin-bottom: 15px;">
							No Products Found
						</h3>
						<p style="color: #718096; font-size: 1.1rem; margin-bottom: 30px;">
							Try adjusting your filters or search query
						</p>
						<a href="/shop/" class="btn" 
							style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border: none; padding: 14px 35px; border-radius: 12px; font-weight: 600; text-decoration: none;">
							Clear All Filters
						</a>
					</div>
				</div>
				{% endif %}
			</div>
		</div>
	</div>
</div>

<style>
	.product-card:hover {
		transform: translateY(-10px);
		box-shadow: 0 15px 40px rgba(0, 0, 0, 0.12) !important;
	}

	.product-card:hover .product-image {
		transform: scale(1.05);
	}

	.btn:hover {
		transform: translateY(-2px);
		box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2) !important;
	}
	
	.form-check label:hover {
		background: #f7fafc !important;
	}
</style>

{% endblock body %}